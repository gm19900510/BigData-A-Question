# 搜索过程

搜索过程分为 `query then fetch` 两个阶段。

query 阶段的目的：定位到文档位置，但不取

fetch 阶段的目的：取数据

## query 阶段步骤

1. 假设一个索引数据有 5 主+1 副本 共 10 分片，一次请求会命中（主或者副本分片中）的一个
2. 每个分片在本地进行查询，结果返回到本地有序的优先队列中