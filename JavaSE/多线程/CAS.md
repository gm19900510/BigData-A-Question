# CAS

> CAS：**compare and swap**，即**比较并交换**。CAS是一个原子操作，它比较一个内存位置的值并且只有相等时修改这个内存位置的值为新的值，保证了新的值总是基于最新的消息计算的，如果有其他线程在这个期间修改了这个值则 CAS 失败。

比较交换（CAS）指令包含了3个操作数——需要读写的*内存位置V*、进行比较的*值A*和拟写入的*新值B*。当且仅当V的值等于A，CAS才会通过原子方式用新值B来更新V的值，否则不会执行任何操作。通俗来讲，就是“我认为V的值应该为A，如果是，那么将V的值更新为B，否则不修改并告诉V的值实际是多少”。

## ABA 问题

> 其他线程修改数次后，最后的值和原值相同

添加版本号





无锁-偏向锁-轻量级锁（自旋锁、自适应锁）-重量级锁