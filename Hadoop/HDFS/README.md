# HDFS

## 概念

### 数据块

HDFS 的数据块默认大小是 128MB。HDFS 上的文件也被划分为块大小的多个分块（chunk），作为独立的存储单元。

> 注：HDFS 中小于一个块大小的文件不会占据整个块的空间，而是实际的文件大小。例如，当一个 1MB 的文件存储在一个 128MB 的块中时，文件只使用 1MB 的磁盘空间，而不是 128MB。

### namenode 和 datanode

HDFS 集群有两类节点以管理节点-工作节点模式运行，即一个 namenode（管理节点）和多个 datanode（工作节点）。namenode 管理文件系统的命名空间。它维护着文件系统树及整棵树内所有的文件和目录。这些信息以两个文件形式永久保存在本地磁盘上：**命名空间镜像文件**和**编辑日志文件**。namenode 也记录着每个文件中各个块所在的数据节点信息，但它并不永久保存块的位置信息，因为这些信息会在系统启动时根据数据节点信息重建。

客户端代表用户通过与 namenode 和 datanode 交互来访问整个文件系统。

datanode 是文件系统的工作节点。它们根据需要存储并检索数据块（受客户端或 namenode 调度），并且定期向 namenode 发送它们所存储的块的列表。没有 namenode，文件系统将无法使用。