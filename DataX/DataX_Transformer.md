## Transformer 定义

在数据同步、传输过程中，存在用户对于数据传输进行特殊定制化的需求场景，包括裁剪列、转换列等工作，可以借助 ETL 的 T 过程实现（Transformer）。DataX 包含了完成的E（Extract）、T（Transformer）、L（Load）支持。

## 运行模型

![img](../images/687474703a2f2f6769742e636e2d68616e677a686f752e6f73732e616c6979756e2d696e632e636f6d2f75706c6f6164732f64617461782f64617461782f62353635326330343932633339343638343935383237323231396365333237632f696d6167652e706e67.png)

## UDF 手册

### `dx_substr`

- 参数：3 个

  - 第一个参数：字段编号，对应 record 中的第几个字段
  - 第二个参数：字段值的开始位置
  - 第三个参数：目标字段的长度

- 返回：从字符串的指定位置（包含）截取指定长度的字符串。如果开始位置非法则抛出异常。如果字段为控制，直接返回（即不参与本 transformer）

- 举例：

  ```json
  dx_substr(1,"2","5") column 1的 value 为 "dataxTest"=>"taxTe"
  dx_substr(1,"5","10") column 1的 value 为 "dataxTest"=>"Test"
  ```

### `dx_pad`

- 参数：4 个
  - 第一个参数：字段编号，对应 record 中第几个字段
  -  第二个参数："l","r" 指示是在头进行 pad，还是在尾进行 pad
  - 第三个参数：目标字段长度
  - 第四个参数：需要 pad 的字符
  
- 返回：如果源字符串长度小于目标字段长度，按照位置添加pad字符后返回。如果长于，直接截断（都截右边）。如果字段为空值，转换为空字符串进行pad，即最后的字符串全是需要pad的字符

- 举例：

  ```json
  dx_pad(1,"l","4","A"), 如果column 1 的值为 xyz=> Axyz， 值为 xyzzzzz => xyzz
  dx_pad(1,"r","4","A"), 如果column 1 的值为 xyz=> xyzA， 值为 xyzzzzz => xyzz
  ```

### `dx_replace`

- 参数：4 个
  - 第一个参数：字段编号，对应 record 中第几个字段
- 返回：
- 举例：

### `dx_filter`

- 参数：3 个
  - 第一个参数：字段编号，对应 record 中第几个字段
  - 第二个参数：字段值的开始位置
  - 第三个参数：需要替换的字段长度
  - 第四个参数：需要替换的字符串
- 返回：
- 举例：

### `dx_groovy`

- 参数：2 个
  - 第一个参数：字段编号，对应 record 中第几个字段
- 返回：
- 举例：