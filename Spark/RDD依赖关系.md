# RDD 依赖关系

在 RDD 中将依赖划分成了两种类型：窄依赖（Narrow Dependencies）和宽依赖（Wide Dependencies），如下图所示：

![image-20200602093538654](D:\superz\BigData-A-Question\Spark\images\image-20200602093538654.png)

窄依赖是指每个父 RDD 的分区都至多被一个子 RDD 的分区使用，而宽依赖是多个子 RDD 的分区依赖一个父 RDD 的分区。

这两个依赖有如下两个区别：

- 窄依赖允许在单个集群节点上流水线式执行，这个节点可以计算所有父级分区。相反，宽依赖需要所有的父 RDD 数据可用，并且数据已经通过类 MapReduce 的操作 Shuffle完成。
- 在窄依赖中，节点失败后的恢复更加高效。因为只有丢失的父级分区需要重新计算，并且这些丢失的父级分区可以并行地在不同节点上重新计算。与此相反，在宽依赖的继承关系中，单个失败的节点可能导致一个 RDD 的所有先祖 RDD 中的一些分区丢失，导致计算的重新执行。