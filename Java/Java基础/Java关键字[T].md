# Java关键字

## static关键字

static表示“静态”的意思，用来修饰成员变量和成员方法，也可以修饰代码块。

Java把内存分为栈内存和堆内存，其中栈内存用来存放一些基本类型的变量、数组和对象的引用，堆内存主要存放一些对象。在JVM加载一个类的时候，若该类存在static修饰的成员变量和成员方法，则会为这些成员变量和成员方法在固定的位置开辟一个固定大小的内存区域，有了这些“固定”的特性，那么JVM就可以非常方便地访问他们。同时如果静态的成员变量和成员方法不出作用域的话，它们的句柄都会保持不变。同时static所蕴含“静态”的概念表示着它是不可恢复的，即在那个地方，你修改了，他是不会变回原样的，你清理了，他就不会回来了。

同时被static修饰的成员变量和成员方法是独立于该类的，它不依赖于某个特定的实例变量，也就是说它被该类的所有实例共享。所有实例的引用都指向同一个地方，任何一个实例对其的修改都会导致其他实例的变化。

### static的使用

static可以用于修饰成员变量和成员方法，将其称之为静态变量和静态方法，直接通过类名来进行访问。

- ClassName.propertyName
- ClassName.methodName(...)

Static修饰的代码块表示静态代码块，当JVM装载类的时候，就会执行这块代码。

#### static变量

static修饰的变量我们称之为静态变量，没有用static修饰的变量称之为实例变量，它们两者的区别是：静态变量是随着类加载时被完成初始化的，它在内存中仅有一个，且JVM也只会为它分配一次内存，同时类所有的实例都共享静态变量，可以直接通过类名来访问它。但是实例变量则不同，它是伴随着实例的，每创建一个实例就会产生一个实例变量，它与该实例同生共死。所以一般在这两种情况下使用静态变量：对象之间共享数据、访问方便。

#### static方法

static修饰的方法我们称之为静态方法，通过类名对其进行直接调用。由于它在类加载的时候就存在了，它不依赖于任何实例，所以static方法必须实现，也就是说它不能是抽象方法abstract。

#### static代码块

被static修饰的代码块，称之为静态代码块，静态代码块会随着类的加载一块执行，而且可以随意放置在类的任何地方。

### static的局限

1. 它只能调用static变量。
2. 它只能调用static方法。
3. 不能以任何形式引用this、super。
4. static变量在定义时必须要进行初始化，且初始化时间要早于非静态变量。

## final关键字

final是java的关键字，它所表示的是“这部分是无法修改的”。不想被改变的原因有两个：效率、设计。使用到final的有三种情况：数据、方法、类。

### final数据

有时候数据的恒定不变是很有用的，它能够减轻系统运行时的负担。对于这些恒定不变的数据被称作“常量”。

“常量”主要应用与以下两个地方：

- 编译期常量，永远不可改变。
- 运行期初始化时，我们希望它不会被改变。

对于编译期常量，它在类加载的过程就已经完成了初始化，所以当类加载完成后是不可更改的，编译期可以将它代入到任何用到它的计算式中，也就是说可以在编译期执行计算式。当然对于编译期常量，只能使用基本类型，而且必须要在定义时进行初始化。

有些变量，我们希望它可以根据对象的不同而表现不同，但同时又不希望它被改变，这个时候我们就可以使用运行期常量。对于运行期常量，它既可是基本数据类型，也可是引用数据类型。基本数据类型不可变的是其内容，而引用数据类型不可变的是其引用，引用所指定的对象内容是可变的。

### final方法

所有被final标注的方法都是不能被继承、更改的，所以对于final方法使用的第一个原因就是方法锁定，以防止任何子类来对它的修改。至于第二个原因就是效率问题，在java的早期实现中，如果将一个方法指明为final，就是同意编译器将针对该方法的所有调用都转为内嵌调用。当编译器发现一个final方法调用命令时，它会根据自己的谨慎判断，跳过插入程序代码这种正常的调用方式而执行方法调用机制（将参数压入栈，跳至方法代码处执行，然后跳回并清理栈中的参数，处理返回值），并且以方法体中的实际代码的副本来代替方法调用。这将消除方法调用的开销。当然，如果一个方法很大，你的程序代码会膨胀，因而可能看不到内嵌所带来的性能上的提高，因为所带来的性能会花费于方法内的时间量而被缩减。

### final类

如果某个类用final修改，表明该类是最终类，它不希望也不允许其他来继承它。在程序设计中处于安全或者其他原因，我们不允许该类存在任何变化，也不希望它有子类，这个时候就可以使用final来修饰该类了。

对于final修饰的类来说，它的成员变量可以为final，也可以为非final。如果定义为final，那么final数据的规则同样适合它。而它的方法则会自动的加上final，因为final类是无法被继承，所以这个是默认的。

### final参数

若某个参数被final修饰了，则代表了该参数是不可改变的。

### final与static

final和static同时使用时即可修饰成员变量，也可修饰成员方法。

对于成员变量，该变量一旦赋值就不能改变，我们称它为“全局常量”。可以通过类名直接访问。

对于成员方法，则是不可继承和改变。可以通过类名直接访问。

## transient关键字

TODO